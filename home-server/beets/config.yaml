plugins: fetchart embedart convert scrub replaygain lastgenre chroma web hook
directory: /output/music
library: /config/musiclibrary.blb
art_filename: albumart
threaded: yes
original_date: no
per_disc_numbering: no

convert:
    auto: no
    ffmpeg: /usr/bin/ffmpeg
    opts: -ab 320k -ac 2 -ar 48000
    max_bitrate: 320
    threads: 1

paths:
    default: $albumartist/$album%aunique{}/$track - $title
    singleton: Non-Album/$artist - $title
    comp: Compilations/$album%aunique{}/$track - $title
    albumtype_soundtrack: Soundtracks/$album/$track $title

import:
    write: yes
    copy: no
    move: yes
    # resume: ask
    # incremental: yes
    incremental: no
    quiet_fallback: skip
    timid: no
    log: /config/beet.log

lastgenre:
    auto: yes
    source: album

embedart:
    auto: yes

fetchart:
    auto: yes

replaygain:
    auto: no

scrub:
    auto: yes

replace:
    '^\.': _
    '[\x00-\x1f]': _
    '[<>:"\?\*\|]': _
    '[\xE8-\xEB]': e
    '[\xEC-\xEF]': i
    '[\xE2-\xE6]': a
    '[\xF2-\xF6]': o
    '[\xF8]': o
    '\.$': _
    '\s+$': ''

web:
    host: 0.0.0.0
    port: 8337

# hook:
#   hooks:
#     # Delete the source file after successful import
#     - event: item_imported
#       command: |
#         SOURCE_FILE="{item.path}"
#         if [ -f "$SOURCE_FILE" ]; then
#           echo "Deleting imported source file: $SOURCE_FILE"
#           rm -f "$SOURCE_FILE"
#         fi

match:
  strong_rec_thresh: 0.15      # Default: 0.04 (96% match or better = auto-accept)
  medium_rec_thresh: 0.25      # Default: 0.25 (75% match = suggest but ask)
  rec_gap_thresh: 0.25         # Gap between best and second-best match
  
  max_rec:
    missing_tracks: none     # How to handle missing tracks (strong/medium/weak)
    unmatched_tracks: weak   # How to handle extra tracks not in release
  
  preferred:
    countries: ['US']  # Prefer certain countries
    media: ['CD', 'Digital Media|File']
    original_year: yes          # Prefer original release year
  
  # ignored: missing_tracks unmatched_tracks
  
  distance_weights:
    source: 2.0
    artist: 3.0
    album: 3.0
    media: 1.0
    mediums: 1.0
    year: 1.0
    country: 0.5
    label: 0.5
    catalognum: 0.5
    albumdisambig: 0.5
    album_id: 5.0
    tracks: 2.0
    missing_tracks: 0.2
    unmatched_tracks: 0.6
    track_title: 3.0
    track_artist: 2.0
    track_index: 1.0
    track_length: 2.0
    track_id: 5.0